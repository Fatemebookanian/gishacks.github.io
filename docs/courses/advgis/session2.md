---
title: جلسه ۲ - تحلیل فضایی
---
# **تحلیل مطلوبیت**

تحلیل مطلوبیت (Suitability Analysis) یکی از کاربردهای اصلی GIS است که به منظور ارزیابی و شناسایی بهترین مکان‌ها یا گزینه‌ها بر
اساس معیارهای مختلف انجام می‌شود. ( هر تصمیم فضایی که ما می‌گیریم)

به زبان ساده، این تحلیل به ما می‌گوید:  «کجا برای انجام یک فعالیت خاص مناسب‌تر است؟»

برای مثال:

+ بهترین مکان برای ساخت یک مدرسه
+ مناسب‌ترین نواحی برای توسعه کشاورزی
+ بهترین مسیر برای احداث جاده یا خط لوله
+ نواحی مستعد برای حفاظت محیط زیست

**مراحل اصلی تحلیل مطلوبیت در** **GIS**
1. تعریف هدف تصمیم‌گیری:
مشخص کردن اینکه دنبال چه هستیم (مثلاً مکان مناسب برای احداث نیروگاه خورشیدی).
2. شناسایی معیارها:
معیارها شامل عوامل محیطی، اجتماعی، اقتصادی یا فنی هستند.
مثال: فاصله از جاده، میزان شیب زمین، دسترسی به شبکه برق، کاربری اراضی، و غیره.
3. جمع‌آوری داده‌ها:
این داده‌ها معمولاً به‌صورت لایه‌های مکانی( Raster یا Vector) وارد GIS می‌شوند.
4. استانداردسازی داده‌ها:
چون هر معیار مقیاس متفاوتی دارد (مثلاً دما در درجه سانتی‌گراد، شیب در درصد، فاصله در متر)، باید آن‌ها را به مقیاس مشترک (مثلاً 0 تا 1 یا 1 تا 10) تبدیل کرد.
5. وزن‌دهی معیارها:
هر معیار اهمیت متفاوتی دارد. مثلاً دسترسی به جاده ممکن است مهم‌تر از فاصله تا رودخانه باشد.
6. روش‌های معمول برای وزن‌دهی:
روش AHP(تحلیل سلسله‌مراتبی)
روش Entropy      
روش Weighted Overlay در GIS
7. ترکیب لایه‌ها (Overlay):
با ترکیب لایه‌ها و اعمال وزن‌ها، نقشه‌ای تولید می‌شود که نشان می‌دهد هر منطقه چقدر برای هدف مورد نظر مناسب است.
8. تفسیر نتایج:
نواحی با مقدار مطلوبیت بالاتر (مثلاً نمره 0.8 تا 1) مناسب‌تر تلقی می‌شوند.

در ابتدا لازم است که ما داده‌های خود را جمع‌ آوری کنیم؛ یکی از مهم‌ترین داده‌هایی که به آن نیاز داریم داده‌ی نقاط بیمارستان‌های موجود
است: برای اینکار ابتدا به سایت open street map  می‌رویم و محدوده تهران را انتخاب می‌کنیم در بخش exporte  به دلیل اینکه حجم داده‌های دانلودی زیاد است از یکی از درگاه‌هایی که در سمت چپ تصویر زیر می‌بینیم می‌توانیم استفاده کنیم:

![توضیح تصویر](https://www.dropbox.com/scl/fi/lfkxmxvy9nahutwshki33/Screenshot-18.png?rlkey=hb6afop6p9sfekmnem7yx8qeg&st=3bbjln9y&dl=0)

پس از دانلود شدن فایل مورد نظر، لایه نقاط آن را در QGIS اد می‌کنیم؛ از
آنجایی که داده‌های زیادی به عنوان نقطه در نظر گرفته شده‌اند، حجم آنها زیاد است.

از آنجایی که براساس که با راست کلیک روی نقشه open street map  و بررسی  Query features می‌بینیم که کاربری هر نقطه در بخشamenity  کاربری آن آورده شده است. 

در خروجی که از این نقشه به دست آمده است، بخش amenity را می‌توانیم
در attribute table در ستون  other- tag مشاهده‌ کنیم؛ 

حال برای آنکه نقاط بیمارستان را پیدا کنیم باید به بخش toolbar کیو‌جی‌ای‌اس
مراجعه کنیم و در بخش  select feature by value  در ردیف other tag، بنویسیم hospital  و منتظر شویم که نقاط بیمارستان برایمان انتخاب شوند: پس از انتخاب می‌توانیم آنها را در یک شیپ فایل جدا خروجی بگیریم.

![توضیح تصویر](https://www.dropbox.com/scl/fi/bdhzrqgcfycwx1pye4ojp/2.png?rlkey=zo3oehq0sjhs6byzkuoeq0d2j&st=iai8pq93&dl=0)
## تحلیل همپوشانی وزنی

از این تحلیل برای مکانیابی بیمارستان جدید بر اساس فاصله از بیمارستان‌های وضع موجود، مراکز مدیریت بحران و کاربری‌های صنعتی موجود استفاده‌شد. کاربری‌های صنعتی در میانه تحلیل به لایه‌ها اضافه‌شد.
![تصویر 1](https://www.dropbox.com/scl/fi/nphrbwm0846uwf0hmzrhe/1.png?rlkey=yvy0zp67sn6rw7s7ccoukvr53&st=3ugt66vw&dl=1)
 لایه‌های محدوده تهران، بیمارستان‌های وضع موجود و مراکز مدیریت بحران


----------


### تبدیل لایه‌های وکتور به رستر
![تصویر2 ](https://www.dropbox.com/scl/fi/tt50jq6w9jhd90l0ayet5/2.png?rlkey=yn2dhq94hy4ubbst000pkp2pf&st=ng9834t2&dl=1)
تبدیل لایه وکتوری بیمارستان‌های وضع موجود به لایه‌ی رستری بیمارستان‌های وضع موجود
![تصویر3 ](https://www.dropbox.com/scl/fi/enm9nbntx2zcl2eo18ilo/3.png?rlkey=y44rrg0mcuoimtmodhcet91m2&st=non5r3zf&dl=1)
تبدیل لایه وکتوری مراکز مدیریت بحران به لایه رستری مراکز مدیریت بحران


----------


### تحلیل فاصله‌ای کل محدوده تهران بر اساس لایه‌های وکتوری
پس از این مرحله ما باید فاصله تا بیمارستان‌های موجود را بررسی کنیم، در
انیجا منظور ما از فاصله دسترسی است نه نزدیکی به بیمارستان‌های موجود، فرق این دو
در این است که دسترسی از راه‌ها رد می‌شود ولی نزدیکی از روی هوا رد می‌شود و راه‌ها
برای آن مهم نیست و معمولا موقع تعیین حرائم از آن استفاده می‌کنیم.

به دلیل اینکه هنوز سراغ تحلیل‌ فاصله‌ای نرفته‌ایم، تحلیل نزدیکی انجام می‌دهیم؛
ساده‌ترین راه انجام تحلیل نزدیکی بافر است، اما در تحلیل مطلوبیت، بافر پاسخگوی
نیاز ما نیست.

ما به داده‌های رستری نیاز داریم که با ترنزپرنت کم روی نقشه اصلی ما بنشینند:
اما بافر این‌گونه نیست از طرفی دیگر ما نیاز به یک طیف خاکستری نیاز داریم که
براساس نزدیکی از پر‌رنگ به کم‌رنگ رفته باشد در حالی که بافر حالت صفر و یکی دارد
و به صورت طیف نشان داده نمی‌شود.

برای همین برای درست کردن این داده‌های رستری که معادل همان بافر است اما به
جای اینکه عارضه را در نظر بگیرد و فاصله از آن را رسم کند، فاصله تک تک سلول‌های
نقشه را از آن عارضه رسم می‌کند و به آن سلول رنگ می‌دهد.

ابزاری که برای این‌کار به آن نیاز داریم و processing toolbox هست به نام GDAL که با باز کردن زیربخش‌های آن باید Raster Analysis را انتخاب کنیم و در زیر مجموعه‌های آن هم به دنبال نزدیکی یا همانproximity  باشیم و در نهایت proximity (raster distance) را انتخاب می‌کنیم. 

قبل از آنکه ادامه دهیم باید بدانیم همانطور که از نام این ابزار پیداست، ما در حال تحلیل داده‌ی رستری هستیم اما نقاطی که داریم داده‌های وکتوری هستند؛ پس باید ابتدا آنها را به رستر تبدیل کنیم. به همین منظور در همان بخش GDAL در بخش  vector conversion، rasterize(vectore to raster)  را انتخاب می‌کنیم.

زمانی که جدول آن باز می‌شود، ابتدا داده‌ای را که می‌خواهیم به رستر تبدیل کنیم را انتخاب می‌کنیم، سپس A Fixed value to burn  را هر عددی جز صفر انتخاب می‌کنیم چون صرفا بیمارستان بودن یا نبودن برایمان مهم است و ارزش دیگری برای آن تعیین نکرده‌ایم. Out put raster size  را هم georeferenced unit  می‌گذاریم. رزولوشن عمودی و افقی را روی 50 قرار می‌دهیم. Out put extent  هم محدوده نقشه حال حاضر (use canvas extent) را انتخاب می‌کنیم و در قسمت advanced، out put data type  را روی Intl16 قرار می‌دهیم تا اعداد اعشاری تولید نشود.

![تصویر 4](https://www.dropbox.com/scl/fi/5rxoj4e825co0z2fb3tu4/4.png?rlkey=zzz3zbduvefku5bm5d650n7sc&st=fei6zeca&dl=1)
ساخت  لایه رستری فاصله از بیمارستان در شهر تهران
![تصویر 5](https://www.dropbox.com/scl/fi/tbwhtujzzgdut5q7ypybo/5.png?rlkey=3j3ritwzw00ohvt44nmpie0gj&st=w60z4ftg&dl=1)
برای اینکه نتیجه این نقشه را بهتر ببینیم در بخش layers، open the layers styling panels را انتخاب می‌کنیم و سپس در قسمت layer rendering، blending mode را روی multiply قرار می‌دهیم.
تا موقیت نزدیکی سلول‌ها به عوارض و میزان نزدیکی آنها بر حسب طیف خاکستری بهتر نمایش داده شود.
لایه رستری  فاصله از بیمارستان در شهر تهران

![تصویر 6](https://www.dropbox.com/scl/fi/z87ius4avp0vmrrdjfc4e/6.png?rlkey=bq5mazv4g1i4v9lzyqcmm0dz5&st=ovubs3n5&dl=1)
ساخت  لایه رستری فاصله از  مراکز مدیریت بحران در شهر تهران
![تصویر 7](https://www.dropbox.com/scl/fi/zewuaukijhrs1jy3taddb/7.png?rlkey=vh9z4uaio79vugp3x45a1201z&st=jul4bh94&dl=1)
لایه رستری  فاصله از  مراکز مدیریت بحران در شهر تهران


----------


### کلاس‌بندی مجدد برای لایه‌های رستری تولید شده در مرحله قبل
برای **هم‌ارزش کردن شاخص‌های مختلف**، آنها کلاس‌بندی مجدد انجام می‌دهیم.

![تصویر 8](https://www.dropbox.com/scl/fi/zewuaukijhrs1jy3taddb/7.png?rlkey=vh9z4uaio79vugp3x45a1201z&st=8bwf6kgm&dl=1)

#### کلاس های جدید برای لایه رستری فاصله از بیمارستان
برای ساخت بیمارستان هرچقدر فاصله **بیشتر** باشد مطلوب تر است.
![تصویر 9](https://www.dropbox.com/scl/fi/897v4mc3s9k6p9t1g7ujd/9.png?rlkey=j7a5ipo9tb3pn9lr74v5cy7ee&st=do2uyp08&dl=1)
####  لایه فاصله از بیمارستان ایجاد شده از کلاس‌بندی مجدد

![تصویر 10](https://www.dropbox.com/scl/fi/ivdvlf8pwrjupvoaz9672/10.png?rlkey=193pwxqu647aeuelk75laiy02&st=pk5m10e1&dl=1)
####  کلاس های جدید برای لایه رستری فاصله از  مراکز مدیریت بحران
برای ساخت بیمارستان هرچقدر فاصله **کمتر** باشد مطلوب تر است.
![تصویر 11](https://www.dropbox.com/scl/fi/n15ombyb16rivkvq6ktcr/11.png?rlkey=5sbodvf90rhsaa4qv08xvk1m2&st=2e3kev8e&dl=1)
####  لایه فاصله از  مراکز مدیریت بحران ایجاد شده از کلاس‌بندی مجدد


----------

## افزودن مولفه کاربری صنعتی به تحلیل

### انتخاب کاربری صنعتی از باقی کاربری‌ها
![تصویر 12](https://www.dropbox.com/scl/fi/4xqpzw2w8ntwmehq1rv0f/12.png?rlkey=tnsqh5god0quebtk63xrn567c&st=zbvzgxda&dl=1)
 #### در این مرحله فقط کاربری‌هایی که صنعتی هستند را انتخاب می‌کنیم.
![تصویر 13](https://www.dropbox.com/scl/fi/gfp6gbbpsc4cefkfza8cp/13.png?rlkey=bp0sjpudj2lma2zgqux1qblmy&st=qav1qz39&dl=1)
####  کاربری‌های صنعتی بصورت پولیگون سپس با استفاده از دستور centroid این پولیگون‌ها را تبدیل به نقطه می‌کنیم.
![تصویر 14](https://www.dropbox.com/scl/fi/g23m6t0y32mh8fq3nbxtu/14.png?rlkey=kcqj8mj06lgrbez5i2s5xkgm8&st=oqzqda3q&dl=1)
####  سپس اقداماتی که برای لایه بیمارستان و مراکز مدیریت بحران انجام دادیم، تکرار می‌کنیم.
![تصویر 16](https://www.dropbox.com/scl/fi/z5wrxpqwhfllh183kxwiz/16.png?rlkey=t7wcvxkb4pdkkq5g46z4ejexe&st=ng9jvyus&dl=1)
![تصویر 17](https://www.dropbox.com/scl/fi/z8us3uhnzogdnlwv5u97h/17.png?rlkey=whfohqo4d0qgnlr5exoe3t885&st=vdb37cyk&dl=1)
برای ساخت بیمارستان هرچقدر فاصله **بیشتر** باشد مطلوب تر است.


----------


## جمع اثر شاخص‌ها بر مکانیابی
![تصویر 18](https://www.dropbox.com/scl/fi/lhd9ypjrj2ad7hh0rbyp8/18.png?rlkey=9tpq8bm9nd2fqc1hezhkpg9fg&st=lqb7s9om&dl=1)
جمع وزن شاخص‌ها برابر با یک می‌شود که در این پروژه برای بیمارستان 40%، مراکز مدیریت بحران 20% و برای کاربری‌های صنعتی مقدار 40% لخاظ شده است.

### خروجی نهایی
![تصویر 19](https://www.dropbox.com/scl/fi/lt8kugb5614nhkjt7jaoa/19.png?rlkey=5y0m4f0qeti8nwtvjvt2jg1tm&st=epftkxj2&dl=1)
با توجه به دوری از مراکز صنعتی مقدار های 4 به بالا می‌تواند برای مکانیابی بیمارستان جدید انتخاب شوند.

## تحلیل فضایی
یکی از روش­ های قابل استفاده برای تحلیل فضایی، روش **تحلیل مطلوبیت** است. 
برای مثال، می خواهیم ایستگاه متروی جدیدی در تهران احداث کنیم، معیارها می تواند گزینه­ های زیر باشد:
ایستگاه­ های متروی موجود  
کاربری­ های اطراف
تراکم جمعیت  
تعداد شاغلین و مراکز تجاری
برای نمونه می خواهیم فاصله تا ایستگاه های متروی موجود را بدست آوریم. 2 نوع ارزیابی وجود دارد:
**نزدیکی**
**دسترسی**

برای شروع، نزدیکی را انتخاب می کنیم:
1. ابتدا باید لایه وکتوری را تبدیل به رستر کنیم. برای اینکار در قسمت vector conversion گزینه Rasterize (vector to raster) را انتخاب می کنیم. در پنجره باز شده، در قسمت Input layer، لایه وکتوری مورد نظر را انتخاب می کنیم. سپس در قسمت A Fixed value to burn ، عدد 1 را تایپ می کنیم. بخش Output Raster را روی گزینه Georeferensed می گذاریم. در قسمت Width و Height ، عدد 10 را تایپ می کنیم. 
![تصویر 1](https://www.dropbox.com/scl/fi/m80vrog0mdiwqgoxjd15w/Screenshot-2025-10-16-083803.png?rlkey=lf4fi143t5ijjjmps3c82zawd&st=iwiuaulc&dl=0%20%D8%AF%D8%B1%20%D9%82%D8%B3%D9%85%D8%AA%20Output%20Extent)
در قسمت Output Extent، می توانیم گزینه select extent on canvas را انتخاب کنیم و سپس محدوده مورد نظر را سلکت کنیم. در بخش Advanced Parameters، و در قسمت Output data type، گزینه Int 16 را انتخاب می کنیم و سپس Run می کنیم.
![تصویر 2](https://www.dropbox.com/scl/fi/fvnztm2fviqpqlu7zq1yg/Screenshot-2025-10-16-085112.png?rlkey=m2bq3d4zsc0wdkoui08racjb8&st=h9oc5d3l&dl=0)
2. حالا باید نزدیکی را بسنجیم. از قسمت ،  Proximity ،Processing Toolbox را انتخاب میکنیم. در قسمت Input layer ، لایه رستری شده را وارد می کنیم. بعد قسمت Distance units ، گزینه Georeferenced Coordinates را انتخاب می کنیم. یک مسیر ذخیره برای لایه انتخاب می کنیم و run می کنیم. 
![تصویر 3](https://www.dropbox.com/scl/fi/akofyaka1o038c6tojju8/Screenshot-2025-10-17-121122.png?rlkey=s1c8firvlw7gcmsck2j8ls0dg&st=e1mfknbt&dl=0)
3. مرحله بعد، طبقه بندی کردن فاصله هاست. هرچه فاصله از ایستگاه موجود بیشتر باشد، برای احداث ایستگاه جدید مطلوب تر است. از قسمت Reclassify by table ،Processing Toolbox  را انتخاب می کنیم. در قسمت Raster layer ، همان لایه Proximity  را انتخاب می کنیم. از قسمت Reclassification table علامت 3 نقطه را انتخاب میکنیم و Add row را زده و فاصله ها را طبقه بندی می کنیم:
![تصویر 4](https://www.dropbox.com/scl/fi/o3439p2ez2xaorjms81nz/Screenshot-2025-10-17-122312.png?rlkey=t4pfecg1zf2du83yvasy4qble&st=6lbbaw3p&dl=0)
بعد قسمت output type  را در حالت Int 16 می گذاریم:
![تصویر 5](https://www.dropbox.com/scl/fi/uh40ak8ide551611qp9wy/Screenshot-2025-10-17-122549.png?rlkey=dcv7fqfqs585m31pdt7jtwvrk&st=jev3q3v5&dl=0)
در آخر به چنین نقشه ای میرسیم:
![تصویر 6](https://www.dropbox.com/scl/fi/2qrjd3x6d1updb5tr8qhd/Screenshot-2025-10-17-123602.png?rlkey=6xkqovp9e3rihg9l3d08b7hyb&st=u45cfac0&dl=0)
