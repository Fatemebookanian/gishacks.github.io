# آشنایی با داده‌های شهری و مرزهای اداری

این جزوه شامل مفاهیم پایه، ابزارها، و کدهای نمونه برای کار با داده‌های شهری در محیط پایتون است. تمرکز اصلی بر استفاده از کتابخانه‌های `geopandas` و مدل‌های تحلیل دسترسی مثل 2SFCA است.

# انواع داده های شهری

+ داده های فضایی (جغرافیایی)
داده های برداری:
نقاط/خطوط/ چند ضلعی
فرمت : shapefile، geojson

داده های رستری:
عکس های هوایی و تصویرسازی

---

## ۱. محیط مجازی و نصب کتابخانه‌ها

برای شروع، بهتر است یک محیط مجازی بسازیم تا وابستگی‌ها جدا باشند:

    python -m  venv genv
    venv\Scripts\activate  

با استفاده از دستور pip کتابخانه‌های پایتون را در ترمینال نصب می‌کنیم:
```
    pip install geopandas contextily matplotlib pandas
```


## ۲. خواندن فایل‌های مکانی با GeoPandas

```
import geopandas as gpd

# خواندن فایل shapefile یا geojson
mahallatMap = gpd.read_file("data/mahallat.shp")

# نمایش جدول ویژگی‌ها
mahallatMap.head()
```

برای دیدن فقط جدول ویژگی‌ها بدون هندسه:
```
attributes_only = mahallatMap.drop(columns='geometry')
attributes_only.head()
```

## ۳. بررسی مسیر فایل و حل ارورهای رایج

+ بررسی مسیر کاری:
```
import os
print(os.getcwd())
```

+ بررسی محتویات پوشه:
```
print(os.listdir("data"))
```

 اگر ارور `No such file or directory` دریافت کردید، مطمئن شوید فایل‌ها از حالت فشرده خارج شده‌اند و مسیر به‌درستی تنظیم شده است.
 
## ۴. مدل 2SFCA برای تحلیل دسترسی مکانی

مدل Two-Step Floating Catchment Area برای سنجش دسترسی به خدمات شهری استفاده می‌شود.

### مرحله اول:

محاسبه نسبت ظرفیت مرکز خدماتی به جمعیت اطراف:

R_j = \frac{S_j}{\sum_{k \in \{d_{kj} \leq d_0\}} D_k}

### مرحله دوم:

محاسبه شاخص دسترسی برای هر نقطه تقاضا:

A_i = \sum_{j \in \{d_{ij} \leq d_0\}} R_j
